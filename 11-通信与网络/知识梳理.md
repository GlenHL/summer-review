# 通信与网络 知识梳理

## 通信/信息论等基础知识

+ 网络的分层结构：(从低到高)物理层→链路层→网络层→传输层<→会话层→表示层>→应用层
+ 通信中的基本问题：
	- 通信的资源：功率、带宽等
	- 通信的失真：噪声、干扰、衰落等因素影响
+ 离散随机变量信息度量：
	- 熵
		* 底为2：单位是比特
		* 底为e：单位是奈特
		* 底为10：单位是哈特
	- 熵的应用：
		* 信源编码：通过信息的有效表示，提高通信的有效性
		* Huffman编码：达到最小平均长度的序列
	- 熵、联合熵、条件熵：链式法则
	- 互信息：
		* 理解一：通过观测Y带来的帮助了解X的信息
		* 理解二：通过观测X带来的帮助了解Y的信息
+ 连续随机变量的熵：
	- 微分熵：衡量不同连续分布的相对不确定性
	- 给定**峰值约束**，达到最大微分熵的分布是：均匀分布
	- 给定**方差约束**，达到最大微分熵的分布是：正态分布
+ 信息传输的优化
	- 目标：最大化发送端和接收端的互信息
	- 方法：定义信道容量，最大化信道容量
	- 信道编码过程：使**输入符号的分布匹配最大互信息**的过程
+ 带限高斯信道：
	- 带限高斯信道的容量：

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/01.png?token=AYGNCP_lDVR6mP34UiAGGkuGBiyVkm1Lks5Zq_4LwA%3D%3D)

	- 低信噪比近似：
	C = 1.44×P/n_0，其中n_0是加性白高斯噪声单边谱密度
		* 容量随功率线性增加
		* 给定功率，增大带宽可以达到低信噪比情况，获得最大功率效率

## 压缩编码理论

+ 无损压缩：数据通信
+ 有损压缩：语音、图像等多媒体信源
+ 压缩编码：
	- 能无失真恢复连续信号
	- 抽样数量越少越好
+ 带通抽样定理
+ 量化：将连续幅值离散化
	- 均匀量化(有界随机变量)
	- 非均匀量化
	- 量化噪声 = 正常量化噪声 + 过载噪声
		* 正常量化噪声与信号分布无关
		* 过载噪声与分布有关
+ 最优量化：量化区间总数确定时，最小化量化噪声
	- 分层电平在重建电平的中点
	- 重建电平在量化区间的质心
	- 迭代算法
+ 语音编码：
	- 将人类语音信号转化为数字序列
	- 人类语音信号：300-3400Hz
	- 幅值分布：拉普拉斯分布，特点：信号功率小，动态范围大
	- 语音信号压缩关键步骤：抽样→量化→压缩
	- 语音信号量化：
		* 均匀量化：量化噪声过大
		* 解决思路：非均匀量化，并且注意过载噪声和普通量化噪声的折中
	- 语音信号瞬时压扩：
		* 编码时取对数：压缩
		* 解码时取指数：扩张
	- 对数量化：
		* A律：分段函数，欧洲提出，我国采用
		* μ律：美国提出
	- 脉冲编码调制PCM：
		* 输出码率为64kbps
		* 采样频率8000Hz
		* 增量调制：
			+ 对原始信号求增量
			+ 对收端重构信号求增量
			+ 增量调制抗信道误码能力很强，适合战场通信
		* 过载：增量调制对于变化过快的信号会产生过载
			+ 增加抽样率
			+ 增加增量幅度
		* 自适应压扩：
			+ 信号变换缓慢，采用小的增量
			+ 信号变换剧烈，采用大的增量
	- 其他压缩编码方式：

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/02.png?token=AYGNCMs_qYAaR5XWJLAQ2rq8z9eHxzauks5Zq_4MwA%3D%3D)

## 数字基带传输

#### 1. 数字基带调制概论
+ 为什么要基带调制？
	- 传输信道需要
		* 信道只能传输连续波形，需要把数字序列转换成连续波形
	- 多址和复用需要
		* 只能传输有限带宽的信号

#### 2. 通信波形

1. 符号映射：比特的物理承载
	+ 可行符号的集合
	+ 比特承载量：每个符号最多可对应log2(|A|)个比特
	+ 幅度键控/脉冲幅度调制/相位键控/正交幅度调制
	+ 邻位最小差错映射：格雷码
	+ 符号周期：传输一个符号需要的平均时间Ts
	+ 符号速率：单位时间传输的符号数
	+ 比特速率：单位时间传输的比特数
2. 数字调制：符号的波形加载
	+ 通信系统只能传输连续波形
	+ 通信信号带宽受限
3. Nyquist准则：
	+ 消除符号间串扰：将带限脉冲的频谱分别平移n/Ts(n为任意整数)其叠加的结果对任意频率恒为定值，则ISI为0
4. 通信速率与带宽效率：
	+ 考虑带宽为W的一般低通脉冲
	+ 符号周期最小为1/(2W)，符号速率最大为2W，受限于带宽

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/03.png?token=AYGNCFVDJZ5PV7xu_CP-Th6q-9JcrELMks5Zq_4OwA%3D%3D)

	+ 单位带宽承载之速率：

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/04.png?token=AYGNCKOPiaewHJ63bNvZyWNAdKl2-gbqks5Zq_4QwA%3D%3D)

5. 升余弦滤波器
	+ 滚降系数：α = 2WTs - 1
	+ 带宽效率：单位带宽上获得的比特速率
6. 通信信号的功率谱计算
	+ 简单情况：
		* 无记忆
		* 不同符号波形一致
	
	+ ![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/05.png?token=AYGNCDUpcX7KbcRVxjSd_gFQCOG2Rtieks5Zq_4TwA%3D%3D)


#### 3. 最佳接收
+ 数字基带传输系统
	- 基带调制后，接收到的波形存在随机的失真，对解调造成困难
	- 系统的考察指标：信噪比和误码率
		* **最佳接收**：在给定发射功率下提高信噪比
		* **最佳判决**：在给定信噪比下降低误码率
+ 传送一个符号
	- 直接抽样：
		* 关键是找准抽样位置
		* 没有信噪比增益，接收信号质量随噪声功率的增加而变差
	- 能量累积：积分后再抽样
		* 在抽样前直接积分一下，噪声会正负抵消一部分，信号始终累积
	- 匹配思想：
		* 对接收值进行加权线性累加，最大化抽样时刻信号功率对噪声功率的比值
		* 矩形脉冲使用平权相加，但对于任意脉冲应当加权
		* 瞬时功率大，给予较大加权；瞬时功率小，给予较小加权
		* 优化目标：最大化信噪比

			+ ![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/06.png?token=AYGNCPIi2-_jZONGgsXz_t4dyl1CAgkEks5ZrWXLwA%3D%3D)

			+ 方法一：柯西施瓦兹不等式
			+ 方法二：带约束优化问题
		* 匹配滤波器的冲激响应：

		![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/07.png?token=AYGNCJA1FFE1AMpMfjRsBVlUrsHgsgV-ks5ZrWXNwA%3D%3D)

		* 匹配滤波的频域解释：柯西施瓦兹不等式
+ 相干与匹配
	- 相干解调：
		* 噪声中3/4的功率搬到了高频，相当于噪声损失了6dB
		* 信号与载波相干，只有1/2的功率搬到高频，相当于损失3dB
		* 相干解调信噪比增益最大为**2**(双边带调制可以达到)
		* 代价：带宽增大一倍
	- 匹配滤波信噪比增益的来源
		* 噪声对消
		* 信号**相干叠加**
+ 匹配滤波增益：
	- Eb和Es分别表示每bit能量和每符号能量
	- n0表示噪声密度(单位：焦耳)

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/08.png?token=AYGNCMyRmydTbBnssQdNxVBRaXrOW5zqks5ZrWXPwA%3D%3D)

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/09.png?token=AYGNCMq2koC8MeKQaP-mwMMbUz9rYMkWks5ZrWXRwA%3D%3D)

	- 信噪比最大的隐含条件：理想低通形成基带脉冲，即Sa函数
	- 举例：升余弦滤波

		* ![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/10.png?token=AYGNCOX1Yq-Qzi7rtAgQQ-1HqBRZSSPQks5ZrWXTwA%3D%3D)

		* 单纯由于匹配思想导致的信噪比增益为：1+α
+ 传输一串符号的无ISI条件：
	- 根号Nyquist准则，实际工程中就是这样


#### 4. 判决与差错
+ 最大后验概率准则MAP
+ 最大似然准则ML：通信信号等概率选择时，MAP等效为ML
+ 等效为最小距离准则
+ 双极性码判决门限：
	- 偶数个元素：符号在奇数，门限在偶数
	- 奇数个元素：符号在偶数，门限在奇数
+ 单极性码判决门限：
	- 符号在偶，门限在奇
+ 双极性二元符号的差错率：Q(A/σ)=Q(\sqrt{S/N})
	- 符号差错概率的统计结果成为误符号率
	- Q(x)是减函数，误符号率随A(符号在实轴上的距离)的增大而减小，随噪声标准差σ的增大而增大
+ 误符号率的计算思路：
	1. 确定符号的分布
	2. 画出符号之间的判决门限
	3. 计算各符号的差错概率，用A/σ表示
	4. 计算符号距离A和平均功率的关系(级数求和)
	5. 用信号比S/N表示A/σ代入表达式
+ 常见误符号率的计算结果
	- 单极性二元码误符号率：

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/11.png?token=AYGNCHK-dUDKwak8IRU9ec7NEt-evrpTks5ZrWXVwA%3D%3D)

	- 双极性二元码误符号率：奇数和偶数结果相同

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/14.png?token=AYGNCKYsz2bcGppt6Wk7GpD2cIveBaJuks5ZrWXcwA%3D%3D)

	- 双极性M元码误符号率：奇数和偶数结果相同

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/12.png?token=AYGNCIyrtk8iFpbRg4Rx2lyMyPI9PDb5ks5ZrWXYwA%3D%3D)

	- 单极性M元码：

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/13.png?token=AYGNCJl30DgBEB9-DYjWyV_XGNku0i6qks5ZrWXawA%3D%3D)

	- 单极性码(相对于双极性码)损失6dB的信噪比
+ 从误符号率到误比特率：
	
	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/15.png?token=AYGNCK5TXtPmyyb15FEdjm5Oq_pyJfvhks5ZrWXewA%3D%3D)


## 数字载波传输

#### 5. 为什么需要载波传输？
+ 从物理实现的角度：
	- 为了有效辐射电磁能量
	- 不同频率上的电磁波传输特性不同
+ 从多址接入和复用的角度：
	- 使不同频率的电磁信号互不干扰


#### 6. 载波传输的方法

+ 数字信息的加载--调制
	- 控制载波变化传递数字信息
+ 数字信息的提取--解调
	- 从被噪声污染的信号中恢复信息
+ 常见的载波调制与解调方法：
	- 幅度键控ASK：频谱形状主要由基带信号决定
		* 2ASK基带码型为**单极性非归零码**
		* 调制举例：二进制幅度键控OOK
		* 解调：
			+ 能量检测方法：非相干解调
			+ 接收信号与载波同频同相的信 相乘：相干解调
	- 相移键控PSK：
		* BPSK基带码型为**双极性非归零码**
		* 解调：
			+ 不能非相干解调
			+ 相干解调：接收信号×本地载波
			+ 与ASK不同：对解调信号判决门限不同
		* MPSK：
	- 频移键控FSK：
		* 通过数字序列控制载波频率
		* 有多个载频，但是幅度是恒定的
		* 调制：不同频率的载波 & 选择载波的设备
		* 解调：
			+ 非相干解调：分别检测两个频率的能量
			+ 相干解调：分别与对应载波相乘，再通过低通滤波
		* FSK的载波频率不相同，因此不能用星座图表示
	- 小结：
		* 以上三种调制方式的优点：实现简单/分析简单
		* 缺点：信息传输速率无法随信噪比提高而提高
			+ 解决方法：提高传输功率、降低噪声功率密度
+ 脉冲幅度调制PAM：
	- 控制脉冲的幅度，随着符号集合的增大，每个符号携带的信息量也增大
	- 若符号取值集合有M个符号，则成为M进制调制
	- 与2ASK、BPSK区别：符号集合不同，需要进行**符号选择**
	- 非相干解调：能量检测，但需要多个判决门限
	- 相干解调：同样需要多个判决门限
	- 改进：符号集合元素的值可正可负
		* 不能再用非相干解调，因为对称位置的符号具有相同能量
+ MPSK：
	- MPSK星座图：幅角在[0,2π]之间均匀分布
		* 星座点对称，不存在边界点优势
		* 信号功率易于计算，差错概率难算
		* 与PAM比较：
			+ MPSK可以同时利用I、Q两路正交通道
			+ 同样的峰值和平均功率约束下，可以在星座图平面放下更多的符号
	- MPSK误符号率：

		![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/16.png?token=AYGNCJUCue5dxydm5sW_CizxHJqrURi4ks5ZrWXhwA%3D%3D)

+ 正交幅度调制QAM：
	- 利用载波的正交性，同时传输两路信号从而提高传输速率
	- I路信息提取：乘以同相载波cos，Q路只剩下高频分量，低通后可以滤除
	- Q路信息提取：乘以铜线载波sin，I路只剩下高频分量，低通后可以滤除

+ MQAM：

	- 误符号率：

	![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/17.png?token=AYGNCJ_klcGNTLvEUUitWUggv0wY_Fmaks5ZrWXjwA%3D%3D)

	- MQAM可以看成两路正交的MPAM

#### 7. 有记忆调制与数字频率调制
+ 什么是有记忆调制？
	- 一个码元周期的波形由多个不同的码元联合决定
+ 为什么要有记忆调制？
	1. 频谱成型，从而适应信道的传输特性
	2. 差分相干解调，从而克服载波相位模糊
+ 常见的有记忆调制：
	- 2DPSK：
		* 数字序列是在BPSK原始数字信息基础上差分得到
		* 解调时需要再做一次差分
	- 连续相位调制CPM
+ **小结**：
	- 各类调制方式的区别在于：
		* 调制时：电平的选择
		* 解调时：符号的选择

## 信道编码

#### 8. 传输差错与信道编码
+ 原因：
	- 噪声
	- 码间串扰
	- 多接入干扰
	- 邻小区干扰
+ 匹配滤波 & 最佳判决等手段不可能消除差错
+ 信道编码(又被称为纠错码)：
	- 合理增加冗余信息，纠正信道传输中可能出现的错误
	- 理想信道编码：
		* 码长需要无穷大
		* 没有发现代数结构，复杂度太大
	- 实用化信道编码：
		* 有限码长：误码率非零，效率低
		* 有代数结构：便于译码
	- 评价指标：
		* 误bit率：评价可靠性
		* 误码率：评价有效性


#### 9. 信道编码及具体方法
+ 信道编码分类：
	- 反馈检验
		* 需要双向信道，反馈和前向信道有相同容量
		* 反馈信道可靠，则可以实现无错传输
		* 缺点：不适用于实时业务
	- 检错重发
		* 反馈检验的改进：差错判决在接收端，只反馈差错状态；自动请求重发，减少反馈量；但仍然难以适用于实时业务
	- 前向纠错
		* 线性/非线性码
		* 分组/卷积码
		* 系统/非系统码
		* 三大特征：
			+ 无需反馈信道，在接收端直接纠错
			+ 适用于实时业务，瞬时传输速率稳定
			+ 引入有结构的冗余信息
+ 分组码：
	- 将数字序列分段后，根据规则将每段序列映射成一个码字
	- 优点：
		* 简单并易于分析
	- 检错码：只能检测奇数个错误
		* 奇校验：码的累加和为1时判断为正确
		* 偶校验：码的累加和为0时判断为错误(也有可能错了两位，但是检测不出来偶数个错误)
	- 汉明(Hamming)距离：
		* 两个码字之间汉明距离越大，发生误判的可能性越小
		* 判决方法：与码字距离小于门限则判为该码字
		* 最大检错位数与最大纠错位数：

		![image](https://raw.githubusercontent.com/charlesliucn/summer-review/master/11-%E9%80%9A%E4%BF%A1%E4%B8%8E%E7%BD%91%E7%BB%9C/figures/18.png?token=AYGNCGrhDetus_M5RczOEiBj5gGNzqpxks5ZrlXbwA%3D%3D)

	- 信道编码原则：
		* 可靠性：使得最小码距最大化
		* 有效性：给出尽可能多的许用码字
	- 线性分组码：
		* X是信息序列
		* 生成矩阵：G = [I:Q]
		* A为编码结果：A = XG
		* 监督矩阵H：
			+ H = [Q^T:I]
			+ 检错判据：HA^T ≠ 0
			+ 要求：H的各列均不相同
		* 线性分组码纠错：
			+ 用校正子指示错误的位置
			+ n位码中，至少需要ceil(log2(n+1))位校正子
	- 汉明码的基本性质：
		* 码长：n=2^r-1
		* 信息码位：k=n-r=2^r-1
		* 纠错位数t=1
		* 检错位数e=1
		* 最小码距d=3

## 复用与多址
 
#### 10. 概念和目的
+ 复用：提高资源利用率
	- 在**发送设备内部**完成多路信息混合
	- 通信资源**预先分配**完毕
+ 多址：满足多用户信息传输需求
	- 在传输媒质或**信道**中完成多路信息混合
	- 通信资源根据用户需求**动态分配**
+ 主要类别：
	- 频分
		* 要求各频率本振准确且稳定，带宽严格受限
		* 频分复用：
			+ 优点：不要求多路时钟同步，不需要时钟抖动调整
			+ 缺点：交调失真和高次谐波，用的模拟滤波器比较复杂

	- 时分
		* 优点：复用和分接都可数字处理，灵活和考；直接对比特流处理
		* 缺点：需要时钟对齐，因而对时钟同步和时钟抖动要求较高
		* 时分复用的应用：交换机和路由器等
		* 时间被划分为时隙，每个时隙对应的比特构成一**帧**
		* 复接：
			+ 最重要环节，将多个支路的比特流合成高速比特流
			+ 实现复接的条件：m个支路比特流码速之和小于合路比特流码速
			+ 帧结构：Q个信息比特(信源编码)，K个非信息比特(复接开销：用于同步，塞入标识等)
			+ 超帧：m个不同支路的帧合路成一个超帧
			+ 误码对于复接影响：信息码位(只错了1比特)、塞入指示位(带来严重误码)
		* 码速调整：
			+ 分配给支路的信息比特传输速率**大于**支路码速：正码速调整(位置多了需要塞入比特)
			+ 分配给支路的信息比特传输速率**等于**支路码速：零码速调整
			+ 分配给支路的信息比特传输速率**小于**支路码速：负码速调整(位置不够需要增加位置)
			+ 最大调整码速
			+ 塞入比：实际调整码速/最大调整码速
		* 帧同步：识别帧的位置
			+ 前提：发送端需要标志帧的开头(同步头)
			+ 同步头的捕捉：离线和在线两种。在线算法欺骗时间呈几何分布
			+ 最优同步头长度
			+ 差错信道下的帧同步：连续几次发现同步头进入同步状态

	- 码分：一般只用于多址
		* 利用不同正交码对一路信号进行扩频
		* 优点：伪随机码比本振容易控制
		* 缺点：伪随机码不同步会破坏正交性
	- 空分：
		* 一般只用于多址
		* 在蜂窝中划分扇区
	- 极分：
		* 用于复用
		* 正交化重复利用频谱资源
+ 单工与双工：
	-  双向通信，通信资源共享(频分双工、时分双工等)
	- 单工：只能单向传输(广播系统)
	- 半双工：可以实现双向通信，但任一时刻只能单向传输(对讲机)
	- 全双工：系统将信道分为两个单向的信道
+ 时分复用系统与标准：
	- 准同步数字复接
		* 基于点对点传输
	- 同步数字复接
		* 固定位置映射法
		* 优点：
			+ 通用兼容的光、电接口
			+ 对PDH的向下兼容性
		* 缺点：
			+ 效率低
			+ 指针调整机制复杂
			+ 软件的大量使用影响安全性
+ 多址的本质：固定化的资源共享实现多用户同时接入
	- 随机接入
		* aloha接入
			+ 随机接入：有数据要发送立刻发送，如果遇到冲突/碰撞就重发。
			+ 传输模式/监听/重发/超时
			+ 0.184
		* 时隙aloha
		* c-aloha
	- CSMA
		* 1-persistent
		* p-persistent，若空闲，以概率p发送数据。
		* 非坚持 若忙，等待一随机时间重发。
		* 先监听
	- CSMA/CD协议！
		* 用CSMA协议发送数据
		* 一旦冲突，立即终止，瞬时干扰信号，让所有站点都知道冲突了。
		* 干扰信号后随机事件后再次重复。
		* 能检测冲突但无法避免。
		* 总线式的以太网
	- CSMA/CA协议！
		* 发送前检测网络中是否有数据；若无，随机等待后探测，若还是无，则发送数据。
		* 接收端收到数据后发送ACK
		* 无法检测只能尽量避免。
		* 无线局域网
	- CSMA的几个问题
		* 隐藏终端 A，C同时向B发送数据，导致在B处叠加，无法分辨。
			- RTS/CTS
				+ 邻居节点获取本次传输所需时间NAV，保持静默。
				+ RTS/CTS包长短，碰撞开销小。
		* 暴露终端 互不影响，但是不能同时发送。
	- token ring 
		* 无数据：空令牌
		* 空令牌到某站，若无数据要发送，则快速通过；否则改为忙令牌加载数据
		* 各工作站检查忙令牌地址，如果是自己的就复制数据后加载被复制的标记
		* 忙令牌一周后回到原站，检测是否被接收，清除后发送一个空令牌。
	- 轮询
		* 询问用户有无信息发送
		* 轮叫轮询：主机点对点
		* 传递轮询：N发完后会附上N-1地址，类似于令牌环。
## 交换与路由

#### 11.0 交换
+ 电路交换
+ 报文交换 时延大
+ 分组交换 可实时
+ 空间交换网络
	- 单级交换网络
	- 多级交换网络
		* 内部竞争，所有入线只和第一级交换单元连接。
	-阻塞？
		* 严格/可重拍/广义无阻塞。
		* 严格：单级无阻塞。 交叉点数太多。
			- clos 网路三级无阻塞条件 r>=n,r>=2n-1
+ 时间交换单元
	- 共享储存器
		* 主要是排队的调度
+ 光交换
	- 时分/波分
#### 11. 基础概念
+ 所有host有唯一的ID
+ 所有的包(packet)头(header)包含：
	- 源ID、目标ID和载荷等其它信息
+ 转发决策：基于路由表
+ 三分之一的互联网路由是非对称的

#### 12. 路由转发的方法
+ 方法一：简单方法
	- 将A传输的包转发到除了A之外的所有端口
	- 优点：简单，每个目的地址都可以到达
	- 缺点：效率太低，一个路由可能多次收到包，而且可能陷入循环
+ 方法二：距离向量法
	- Bellman-Ford算法
+ 方法三：连接状态法
	- Dijkstra最短路径算法
	- 构建转发表
+ 不同的策略对应的协议：
	- 最小生成树 生成树协议
	- 距离矢量 RIP （相邻的更新）
	- 最短路径，链路状态路由 OSPF（全局的更新）
	- 局部策略 ，BGP协议
## 流量控制

#### 13. 传输层
+ OSI模型：
	- 物理层、数据链路层、网络层、传输层、会话层、表示层、应用层
+ 四层模型：
	- 链路层、网络层、传输层、应用层

#### 14. TCP协议
+ 最大流=最小割量
	- F-F定理，寻找最大流。
	- 流量工程：NPC问题
+ 拥塞
	- 负载大于流量导致
	- 发现机制
		+ CSMA
		+ 冲突检测
		+ 观测传输性能：延迟/丢包率
	- 处理机制
		+ 降低速率
		+ 拥塞窗口CW：最大可发送的byte数，加性增+1，乘性减/2（大于ssthresh时，执行拥塞避免算法）
		+ 慢开始（指数），进入拥塞避免（线性），超时（/2）
+ TCP是全向连接的
 	- 过程：
		+ 1SYN
		+ 2SYNACK
		+ 1ACK
		+ 1DATA
		+ 2ACK
	- 流量窗口：防止发得太快来不及接收。
	- 拥塞窗口：防止发得太快网络阻塞
	- TCP发送窗口是流量窗口和拥塞窗口的最小值。
+ TCP提供的是比特流服务
+ TCP比较可靠：
	- 传输成功会有ACK(acknowledgement)提示
	- 校验和checksum用于检测传输不成功的数据
	- 传输不成功的数据有自动重发机制
	- TCP使用流量控制在用户间分享网络容量

#### 15. UDP协议
+ UDP是无连接的数据流图服务：包可能在任意时候出现
+ UDP的包是独立的
+ UDP不可靠：
	- 传输成功没有提示
	- 没有**检测丢失包**的机制
	- 没有自动重发机制
	- 没有流量控制机制

#### 16. 阻塞问题
+ 阻塞是不可避免的
+ TCP发送能够检测阻塞，通过减小窗的大小降低发送速率
+ TCP一般默认的最大窗长都很小
+ 避免阻塞的方案： random early detetcion 提前丢包
	- 基于路由的阻塞避免
		* DECbit：被阻塞之后设置DECbit，源会调整速率避免阻塞
		* 随机早期检测：基于DECbit
	- 基于host的阻塞避免
